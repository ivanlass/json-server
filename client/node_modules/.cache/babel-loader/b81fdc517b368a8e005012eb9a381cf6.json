{"ast":null,"code":"var _jsxFileName = \"/home/ivan/Documents/projekti2/sim-test/client/src/Components/TrialList.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Card from \"./CardUser\";\n\nfunction TrialList(props) {\n  const [howManyEnrolled, setHowManyEnrolled] = useState([]);\n  const enrollment = props.enrollment;\n  const enrolled = props.enrolled;\n  const trials = props.trials; //  calculate how many are enrollments \n\n  useEffect(() => {\n    const totalCount = [];\n    const count = {}; //extract trialId and store in @totalCount\n\n    for (let index = 0; index < enrollment.length; index++) {\n      totalCount.push(enrollment[index].trialId);\n    } //count duplicates and you get how many participants are in trials\n    //stored in @count than stored in @howManyEnrolled\n\n\n    totalCount.forEach(function (i) {\n      count[i] = (count[i] || 0) + 1;\n    });\n    setHowManyEnrolled(count);\n  }, [enrollment]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 5\n    }\n  }, trials.map(trial => {\n    if (props.enrolledRender) {\n      {\n        console.log(enrolled);\n      }\n\n      if (enrolled.includes(trial.id)) {\n        return /*#__PURE__*/React.createElement(Card, Object.assign({\n          key: trial.id\n        }, trial, {\n          loggedUser: props.loggedUser,\n          isEnrolled: enrolled.includes(trial.id),\n          isMaxEnrolled: trial.maxPartipants >= howManyEnrolled[trial.id],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 18\n          }\n        }));\n      }\n    } else {\n      return /*#__PURE__*/React.createElement(Card, Object.assign({\n        key: trial.id\n      }, trial, {\n        loggedUser: props.loggedUser,\n        isEnrolled: enrolled.includes(trial.id),\n        isMaxEnrolled: trial.maxPartipants >= howManyEnrolled[trial.id],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 23\n        }\n      }));\n    }\n  }));\n}\n\nexport default TrialList;","map":{"version":3,"sources":["/home/ivan/Documents/projekti2/sim-test/client/src/Components/TrialList.js"],"names":["React","useState","useEffect","Card","TrialList","props","howManyEnrolled","setHowManyEnrolled","enrollment","enrolled","trials","totalCount","count","index","length","push","trialId","forEach","i","map","trial","enrolledRender","console","log","includes","id","loggedUser","maxPartipants"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,YAAjB;;AAEA,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AACxB,QAAM,CAACC,eAAD,EAAkBC,kBAAlB,IAAwCN,QAAQ,CAAC,EAAD,CAAtD;AACA,QAAMO,UAAU,GAAGH,KAAK,CAACG,UAAzB;AACA,QAAMC,QAAQ,GAAIJ,KAAK,CAACI,QAAxB;AACA,QAAMC,MAAM,GAAGL,KAAK,CAACK,MAArB,CAJwB,CAOxB;;AACAR,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMS,UAAU,GAAG,EAAnB;AACE,UAAMC,KAAK,GAAG,EAAd,CAFY,CAGZ;;AACA,SAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGL,UAAU,CAACM,MAAvC,EAA+CD,KAAK,EAApD,EAAwD;AACtDF,MAAAA,UAAU,CAACI,IAAX,CAAgBP,UAAU,CAACK,KAAD,CAAV,CAAkBG,OAAlC;AACD,KANW,CAOZ;AACA;;;AACAL,IAAAA,UAAU,CAACM,OAAX,CAAmB,UAASC,CAAT,EAAY;AAAEN,MAAAA,KAAK,CAACM,CAAD,CAAL,GAAW,CAACN,KAAK,CAACM,CAAD,CAAL,IAAU,CAAX,IAAgB,CAA3B;AAA8B,KAA/D;AACAX,IAAAA,kBAAkB,CAACK,KAAD,CAAlB;AACD,GAXM,EAWJ,CAACJ,UAAD,CAXI,CAAT;AAgBA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEIE,MAAM,CAACS,GAAP,CAAYC,KAAD,IAAW;AACpB,QAAIf,KAAK,CAACgB,cAAV,EAAyB;AACvB;AAACC,QAAAA,OAAO,CAACC,GAAR,CAAYd,QAAZ;AAAsB;;AACvB,UAAGA,QAAQ,CAACe,QAAT,CAAkBJ,KAAK,CAACK,EAAxB,CAAH,EAA+B;AACjC,4BAAO,oBAAC,IAAD;AACL,UAAA,GAAG,EAAEL,KAAK,CAACK;AADN,WAEDL,KAFC;AAGL,UAAA,UAAU,EAAEf,KAAK,CAACqB,UAHb;AAIL,UAAA,UAAU,EAAEjB,QAAQ,CAACe,QAAT,CAAkBJ,KAAK,CAACK,EAAxB,CAJP;AAKL,UAAA,aAAa,EAAEL,KAAK,CAACO,aAAN,IAAuBrB,eAAe,CAACc,KAAK,CAACK,EAAP,CALhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAP;AAOG;AACJ,KAXC,MAWI;AAAC,0BAAO,oBAAC,IAAD;AACV,QAAA,GAAG,EAAEL,KAAK,CAACK;AADD,SAENL,KAFM;AAGV,QAAA,UAAU,EAAEf,KAAK,CAACqB,UAHR;AAIV,QAAA,UAAU,EAAEjB,QAAQ,CAACe,QAAT,CAAkBJ,KAAK,CAACK,EAAxB,CAJF;AAKV,QAAA,aAAa,EAAEL,KAAK,CAACO,aAAN,IAAuBrB,eAAe,CAACc,KAAK,CAACK,EAAP,CAL3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAP;AAMF;AACJ,GAnBD,CAFJ,CADF;AA0BD;;AAED,eAAerB,SAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Card from \"./CardUser\";\n\nfunction TrialList(props) {\n  const [howManyEnrolled, setHowManyEnrolled] = useState([]);\n  const enrollment = props.enrollment;\n  const enrolled  = props.enrolled\n  const trials = props.trials\n\n  \n  //  calculate how many are enrollments \n  useEffect(() => {\n    const totalCount = []\n      const count = {};\n      //extract trialId and store in @totalCount\n      for (let index = 0; index < enrollment.length; index++) {\n        totalCount.push(enrollment[index].trialId)\n      }\n      //count duplicates and you get how many participants are in trials\n      //stored in @count than stored in @howManyEnrolled\n      totalCount.forEach(function(i) { count[i] = (count[i]||0) + 1;});\n      setHowManyEnrolled(count)\n    }, [enrollment]);\n    \n    \n\n  \n  return (\n    <div>\n      {\n        trials.map((trial) => {\n          if (props.enrolledRender){\n            {console.log(enrolled)}\n            if(enrolled.includes(trial.id)){\n          return <Card \n            key={trial.id} \n            {...trial} \n            loggedUser={props.loggedUser}\n            isEnrolled={enrolled.includes(trial.id)}\n            isMaxEnrolled={trial.maxPartipants >= howManyEnrolled[trial.id]\n            }  \n          />}\n        }else {return <Card \n            key={trial.id} \n            {...trial} \n            loggedUser={props.loggedUser}\n            isEnrolled={enrolled.includes(trial.id)}\n            isMaxEnrolled={trial.maxPartipants >= howManyEnrolled[trial.id]}  \n          />}\n        }\n      )}\n    </div>\n  );\n}\n\nexport default TrialList;\n"]},"metadata":{},"sourceType":"module"}